import{p as s,d as e,k as i,i as a,c as l,g as t,F as o,m as n}from"../../../chunks/svelte-vendor.js";import"../../../chunks/audio-engine.js";import{B as p,I as d,a as c}from"../../../chunks/voice-control.js";import*as u from"tone";function h(o,n){o.component(o=>{let u,{trackId:h,notes:r=[]}=n,v="draw",m="1/16",x=!0,b=!1,g="major";const k={major:[0,2,4,5,7,9,11],minor:[0,2,3,5,7,8,10],harmonic_minor:[0,2,3,5,7,8,11],pentatonic:[0,2,4,7,9],blues:[0,3,5,6,7,10],chromatic:[0,1,2,3,4,5,6,7,8,9,10,11]};function w(s){v=s,u.setTool(s)}o.push('<div class="piano-roll svelte-1dm2aw0">'),s(o,"div",172,0),o.push('<div class="toolbar glass-strong svelte-1dm2aw0">'),s(o,"div",174,2),o.push('<div class="tool-group svelte-1dm2aw0">'),s(o,"div",176,4),o.push('<span class="tool-label svelte-1dm2aw0">'),s(o,"span",177,6),o.push("Tools:</span>"),e(),o.push(" "),p(o,{variant:"select"===v?"primary":"secondary",size:"sm",onclick:()=>w("select"),children:i(s=>{d(s,{name:"cursor",size:"sm"})})}),o.push("\x3c!----\x3e "),p(o,{variant:"draw"===v?"primary":"secondary",size:"sm",onclick:()=>w("draw"),children:i(s=>{d(s,{name:"pencil",size:"sm"})})}),o.push("\x3c!----\x3e "),p(o,{variant:"erase"===v?"primary":"secondary",size:"sm",onclick:()=>w("erase"),children:i(s=>{d(s,{name:"eraser",size:"sm"})})}),o.push("\x3c!----\x3e</div>"),e(),o.push(' <div class="grid-controls svelte-1dm2aw0">'),s(o,"div",205,4),o.push('<span class="tool-label svelte-1dm2aw0">'),s(o,"span",206,6),o.push("Grid:</span>"),e(),o.push(" "),o.select({class:"grid-select",value:m,onchange:s=>{return e=s.target.value,m=e,void u.setGridDivision(e);var e}},s=>{s.option({value:"1/4"},s=>{s.push("1/4")}),s.option({value:"1/8"},s=>{s.push("1/8")}),s.option({value:"1/16"},s=>{s.push("1/16")}),s.option({value:"1/32"},s=>{s.push("1/32")}),s.option({value:"1/64"},s=>{s.push("1/64")}),s.option({value:"1/4T"},s=>{s.push("1/4T")}),s.option({value:"1/8T"},s=>{s.push("1/8T")}),s.option({value:"1/16T"},s=>{s.push("1/16T")})},"svelte-1dm2aw0"),o.push(" "),c(o,{checked:x,label:"Snap to Grid",onchange:function(){x=!x,u.setSnapToGrid(x)}}),o.push("\x3c!----\x3e</div>"),e(),o.push(' <div class="scale-controls svelte-1dm2aw0">'),s(o,"div",230,4),c(o,{checked:b,label:"Snap to Scale",onchange:function(){b=!b,u.setSnapToScale(b)}}),o.push("\x3c!----\x3e "),b?(o.push("\x3c!--[--\x3e"),o.select({class:"scale-select",value:g,onchange:function(s){const e=s.target;g=e.value,u.setScale(k[g],60)}},s=>{s.option({value:"major"},s=>{s.push("Major")}),s.option({value:"minor"},s=>{s.push("Minor")}),s.option({value:"harmonic_minor"},s=>{s.push("Harmonic Minor")}),s.option({value:"pentatonic"},s=>{s.push("Pentatonic")}),s.option({value:"blues"},s=>{s.push("Blues")}),s.option({value:"chromatic"},s=>{s.push("Chromatic")})},"svelte-1dm2aw0")):o.push("\x3c!--[!--\x3e"),o.push("\x3c!--]--\x3e</div>"),e(),o.push(' <div class="actions svelte-1dm2aw0">'),s(o,"div",250,4),p(o,{variant:"secondary",size:"sm",onclick:function(){u.quantizeSelectedNotes()},children:i(s=>{d(s,{name:"grid",size:"sm"}),s.push("\x3c!----\x3e Quantize")})}),o.push("\x3c!----\x3e "),p(o,{variant:"ghost",size:"sm",onclick:function(){u.getNotes().forEach(s=>u.selectNote(s.id,!0))},children:i(s=>{s.push("\x3c!----\x3eSelect All")})}),o.push("\x3c!----\x3e "),p(o,{variant:"ghost",size:"sm",onclick:function(){confirm("Clear all notes?")&&(u.setNotes([]),r=[])},children:i(s=>{s.push("\x3c!----\x3eClear")})}),o.push("\x3c!----\x3e</div>"),e(),o.push("</div>"),e(),o.push(' <div class="editor-container svelte-1dm2aw0">'),s(o,"div",265,2),o.push('<div class="piano-roll-canvas-wrapper svelte-1dm2aw0">'),s(o,"div",267,4);{o.push("\x3c!--[--\x3e"),o.push('<div class="piano-keyboard svelte-1dm2aw0">'),s(o,"div",269,8),o.push("\x3c!--[--\x3e");const i=a(Array.from({length:72},(s,e)=>96-e));for(let a=0,n=i.length;n>a;a++){let n=i[a];const p=[1,3,6,8,10].includes(n%12),d=n%12==0;o.push(`<div${l("piano-key svelte-1dm2aw0",void 0,{black:p,white:!p,"c-key":d})}>`),s(o,"div",274,12),d?(o.push("\x3c!--[--\x3e"),o.push('<span class="note-label svelte-1dm2aw0">'),s(o,"span",281,16),o.push(`C${t(Math.floor(n/12)-2)}</span>`),e()):o.push("\x3c!--[!--\x3e"),o.push("\x3c!--]--\x3e</div>"),e()}o.push("\x3c!--]--\x3e</div>"),e()}o.push('\x3c!--]--\x3e <div class="canvas-scroll svelte-1dm2aw0">'),s(o,"div",288,6),o.push('<canvas width="2400" height="600" class="piano-roll-canvas svelte-1dm2aw0">'),s(o,"canvas",289,8),o.push("</canvas>"),e(),o.push("</div>"),e(),o.push("</div>"),e(),o.push(' <div class="velocity-editor-wrapper svelte-1dm2aw0">'),s(o,"div",299,4),o.push('<div class="velocity-label svelte-1dm2aw0">'),s(o,"div",300,6),o.push("Velocity</div>"),e(),o.push(' <div class="velocity-canvas-scroll svelte-1dm2aw0">'),s(o,"div",301,6),o.push('<canvas width="2400" height="120" class="velocity-canvas svelte-1dm2aw0">'),s(o,"canvas",302,8),o.push("</canvas>"),e(),o.push("</div>"),e(),o.push("</div>"),e(),o.push("</div>"),e(),o.push(' <div class="status-bar glass svelte-1dm2aw0">'),s(o,"div",313,2),o.push("<span>"),s(o,"span",314,4),o.push(`Notes: ${t(r.length)}</span>`),e(),o.push(" <span>"),s(o,"span",315,4),o.push(`Selected: ${t(0)}</span>`),e(),o.push(" <span>"),s(o,"span",316,4),o.push(`Tool: ${t(v)}</span>`),e(),o.push(" <span>"),s(o,"span",317,4),o.push(`Grid: ${t(m)}</span>`),e(),o.push("</div>"),e(),o.push("</div>"),e()},h)}function r(a,l){a.component(a=>{let l=!1;n(a,s=>{s.title(s=>{s.push("<title>MIDI Editor Demo - DAWG AI</title>")})}),a.push('<div class="min-h-screen p-8">'),s(a,"div",24,0),a.push('<div class="mb-8">'),s(a,"div",25,2),a.push('<h1 class="text-4xl font-bold mb-2 bg-gradient-to-r from-accent-primary to-accent-secondary bg-clip-text text-transparent">'),s(a,"h1",26,4),a.push("MIDI Editor Demo</h1>"),e(),a.push(' <p class="text-white/70">'),s(a,"p",29,4),a.push("Module 4: Piano Roll Editor</p>"),e(),a.push("</div>"),e(),a.push(" "),l?(a.push("\x3c!--[!--\x3e"),a.push('<div class="glass-strong rounded-panel p-4" style="height: 800px;">'),s(a,"div",43,4),h(a,{trackId:"demo-track",notes:[]}),a.push("\x3c!----\x3e</div>"),e(),a.push(' <div class="mt-8 glass rounded-panel p-6">'),s(a,"div",47,4),a.push('<h3 class="text-xl font-bold mb-4">'),s(a,"h3",48,6),a.push("Keyboard Shortcuts</h3>"),e(),a.push(' <div class="grid grid-cols-2 md:grid-cols-3 gap-4">'),s(a,"div",49,6),a.push("<div>"),s(a,"div",50,8),a.push('<kbd class="kbd svelte-gvbxsc">'),s(a,"kbd",51,10),a.push("V</kbd>"),e(),a.push(" - Select Tool</div>"),e(),a.push(" <div>"),s(a,"div",53,8),a.push('<kbd class="kbd svelte-gvbxsc">'),s(a,"kbd",54,10),a.push("B</kbd>"),e(),a.push(" - Draw Tool</div>"),e(),a.push(" <div>"),s(a,"div",56,8),a.push('<kbd class="kbd svelte-gvbxsc">'),s(a,"kbd",57,10),a.push("E</kbd>"),e(),a.push(" - Erase Tool</div>"),e(),a.push(" <div>"),s(a,"div",59,8),a.push('<kbd class="kbd svelte-gvbxsc">'),s(a,"kbd",60,10),a.push("Cmd/Ctrl+Q</kbd>"),e(),a.push(" - Quantize</div>"),e(),a.push(" <div>"),s(a,"div",62,8),a.push('<kbd class="kbd svelte-gvbxsc">'),s(a,"kbd",63,10),a.push("Cmd/Ctrl+A</kbd>"),e(),a.push(" - Select All</div>"),e(),a.push(" <div>"),s(a,"div",65,8),a.push('<kbd class="kbd svelte-gvbxsc">'),s(a,"kbd",66,10),a.push("Delete/Backspace</kbd>"),e(),a.push(" - Delete Selected</div>"),e(),a.push("</div>"),e(),a.push("</div>"),e(),a.push(' <div class="mt-4 glass rounded-panel p-6">'),s(a,"div",71,4),a.push('<h3 class="text-xl font-bold mb-4">'),s(a,"h3",72,6),a.push("Features</h3>"),e(),a.push(' <ul class="list-disc list-inside space-y-2 text-white/70">'),s(a,"ul",73,6),a.push("<li>"),s(a,"li",74,8),a.push("Click and drag to draw MIDI notes</li>"),e(),a.push(" <li>"),s(a,"li",75,8),a.push("Select notes with selection tool</li>"),e(),a.push(" <li>"),s(a,"li",76,8),a.push("Erase notes with eraser tool</li>"),e(),a.push(" <li>"),s(a,"li",77,8),a.push("Quantize to grid (1/4, 1/8, 1/16, 1/32, triplets)</li>"),e(),a.push(" <li>"),s(a,"li",78,8),a.push("Snap to scale (Major, Minor, Pentatonic, Blues, etc.)</li>"),e(),a.push(" <li>"),s(a,"li",79,8),a.push("Edit note velocities in velocity editor</li>"),e(),a.push(" <li>"),s(a,"li",80,8),a.push("Piano keyboard shows note names</li>"),e(),a.push(" <li>"),s(a,"li",81,8),a.push("Grid lines for timing reference</li>"),e(),a.push("</ul>"),e(),a.push("</div>"),e()):(a.push("\x3c!--[--\x3e"),a.push('<div class="glass-strong rounded-panel p-12 text-center">'),s(a,"div",33,4),a.push('<h2 class="text-2xl font-bold mb-4">'),s(a,"h2",34,6),a.push("Audio Not Initialized</h2>"),e(),a.push(' <p class="text-white/70 mb-6">'),s(a,"p",35,6),a.push("Click the button below to initialize the audio engine</p>"),e(),a.push(" "),p(a,{variant:"primary",size:"lg",onclick:async function(){await u.start(),l=!0},children:i(s=>{s.push("\x3c!----\x3eInitialize Audio")})}),a.push("\x3c!----\x3e</div>"),e()),a.push("\x3c!--]--\x3e</div>"),e()},r)}h[o]="src/lib/components/midi/PianoRoll.svelte",h.render=function(){throw new Error("Component.render(...) is no longer valid in Svelte 5. See https://svelte.dev/docs/svelte/v5-migration-guide#Components-are-no-longer-classes for more information")},r[o]="src/routes/midi-demo/+page.svelte",r.render=function(){throw new Error("Component.render(...) is no longer valid in Svelte 5. See https://svelte.dev/docs/svelte/v5-migration-guide#Components-are-no-longer-classes for more information")};export{r as default};
